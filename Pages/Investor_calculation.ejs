<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New project</title>

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
    <script src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet/0.0.1-beta.5/esri-leaflet.js"></script>
    <script
        src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.js"></script>
    <link rel="stylesheet" type="text/css"
        href="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.css">

    <style>
        #map {
            width: 100%;
            height: 400px;
        }

        #mapSearchContainer {
            position: fixed;
            top: 20px;
            right: 40px;
            height: 30px;
            width: 180px;
            z-index: 110;
            font-size: 10pt;
            color: #5d5d5d;
            border: solid 1px #bbb;
            background-color: #f8f8f8;
        }

        .pointer {
            position: absolute;
            top: 86px;
            left: 60px;
            z-index: 99999;
        }
    </style>

</head>

<body>
    <h1>Panel number calculation</h1>
    <p>
        To see how many solar panels you need to cover up your consumption, please tell us where
        you would like to install panels. Click on the search icon in the map below
        and start typing the name of the location. On the menu which will appear afterwards, choose
        the exact location.
    </p>
    <div id="map"></div>
    <div class='pointer'>
    </div>

    <script>

        var map = L.map('map', {
            center: [43.8563, 18.4131],
            zoom: 8
        });

        L.control.scale().addTo(map);
        // Create a Tile Layer and add it to the map
        var tiles = new L.tileLayer('http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.png').addTo(map);
        L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        var searchControl = new L.esri.Controls.Geosearch().addTo(map);
        var results = new L.LayerGroup().addTo(map);
        searchControl.on('results', function (data) {
            results.clearLayers();
            for (var i = data.results.length - 1; i >= 0; i--) {
                results.addLayer(L.marker(data.results[i].latlng));
            }
            var inputlat = document.getElementById('hiddenInputlat');
            inputlat.value = data.latlng.lat;
            var inputlon = document.getElementById('hiddenInputlon');
            inputlon.value = data.latlng.lng;
            // console.log(input.value.latt);
        });
        /*const axios = require("axios");
        axios({
            method: 'post',
            url: '/resultsInv',
            data: {
                slat: data.latlng.lat,
                slon: data.latlng.lng
            }
        });*/
        setTimeout(function () { $('.pointer').fadeOut('slow'); }, 3400);
    </script>

    <form action="/resultsInv" method="post">
        <div>
            <input type="hidden" name="slat" id="hiddenInputlat" />
            <input type="hidden" name="slon" id="hiddenInputlon" />
            <label for="Latitude">Latitude</label>
            <select list="Latitude" id="Latitude" name="Latitude">
                <datalist id="Latitude">
                    <% for (let i=0; i < 91; i++) { %>
                        <option value=<%=i %>>
                            <%= i %>
                        </option>
                        <% } %>
                </datalist>
            </select>
            <label for="Longitude">Longitude</label>
            <select list="Longitude" id="Longitude" name="Longitude">
                <datalist id="Longitude">
                    <% for (let i=0; i < 181; i++) { %>
                        <option value=<%=i %>>
                            <%= i %>
                        </option>
                        <% } %>
                </datalist>
            </select>
            <div>
                <label for="Hemispheres">Select
                    hemispheres</label>
                <br>
                <label for="North">North</label>
                <input type="radio" name="N_or_S" value="North" checked="checked">
                <label for="South">South</label>
                <input type="radio" name="N_or_S" value="South">
                <br>
                <label for="West">West</label>
                <input type="radio" name="W_or_E" value="West" checked="checked">
                <label for="East">East</label>
                <input type="radio" name="W_or_E" value="East">
            </div>
            <div>
                <label for="Average month">Average
                    monthly consumption
                    (kWh)</label>
                <input type="number" id="Average month" name="Average_monthly_consumption">
            </div>
        </div>
        <div>
            <input type="submit" value="Calculate required panels">
        </div>
    </form>


</body>

</html>